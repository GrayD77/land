{"version":3,"sources":["main.js"],"names":["$","Screen","section","firstIndex","innerElements","find","el","lastIndex","length","_bindEvents","dir","className","_animate","addClass","removeClass","callback","on","off","Page","sections","screens","statesCount","index","each","i","newScreen","push","prevIndex","currIndex","delta","console","log","currentScreen","filter","screen","prevScreen","out","in","window","e","originalEvent","wheelDelta","_prevState","_nextState","_index","value","_prevIndex","Math","max","min","updateState","page","jQuery"],"mappings":"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","file":"all.js","sourcesContent":[";(function($){\n\n\tclass Screen {\n\t\tconstructor(section, firstIndex) {\n\t\t\tlet innerElements;\n\n\t\t\tinnerElements = section.find('.inner-state');\n\n\t\t\tthis.el = section;\n\t\t\tthis.firstIndex = firstIndex;\n\t\t\tthis.lastIndex = firstIndex + (innerElements.length || 1) - 1;\n\n\n\t\t\tthis._bindEvents();\n\t\t}\n\n\t\tin(dir) {\n\t\t\tlet className = dir < 0 ? 'in-prev' : 'in-next';\n\t\t\tthis._animate(className, () => { this.el.addClass('active') })\n\t\t}\n\n\t\tout(dir) {\n\t\t\tlet className = dir < 0 ? 'out-prev' : 'out-next';\n\t\t\tthis._animate(className, () => { this.el.removeClass('active') })\n\t\t}\n\n\t\t_animate(className, callback) {\n\t\t\tthis.el.addClass(className);\n\n\t\t\tthis.el.on('animationend', () => {\n\n\t\t\t\tthis.el.removeClass(className);\n\t\t\t\tcallback();\n\n\t\t\t\tthis.el.off('animationend');\n\t\t\t})\n\t\t}\n\n\t\t_bindEvents() {\n\t\t}\n\t}\n\n\tclass Page {\n\n\t\tconstructor(sections) {\n\t\t\tthis.screens = [];\n\t\t\tthis.statesCount = 0;\n\t\t\tthis.index = 0;\n\n\t\t\tsections.each((i, el) => {\n\t\t\t\tlet newScreen = new Screen($(el), this.statesCount);\n\t\t\t\tthis.statesCount = newScreen.lastIndex + 1; \n\t\t\t\tthis.screens.push(newScreen);\n\t\t\t});\n\n\t\t\tthis._bindEvents();\n\t\t}\n\n\t\tget index() {\n\t\t\treturn this._index;\n\t\t}\n\n\t\tset index(value) {\n\t\t\tthis._prevIndex = this._index;\n\t\t\tthis._index = Math.max(0, Math.min(this.statesCount - 1, value));\n\n\t\t\tif (this._prevIndex === this._index) return false;\n\n\t\t\tthis.updateState(this._prevIndex, this._index);\n\t\t}\n\n\t\tupdateState(prevIndex, currIndex) {\n\t\t\tlet delta = currIndex - prevIndex || 0;\n\t\t\tconsole.log(delta)\n\t\t\tlet currentScreen = this.screens.filter((screen) => {\n\t\t\t\treturn currIndex >= screen.firstIndex && currIndex <= screen.lastIndex;\n\t\t\t})[0];\n\n\t\t\tlet prevScreen = this.screens.filter((screen) => {\n\t\t\t\treturn prevIndex >= screen.firstIndex && prevIndex <= screen.lastIndex;\n\t\t\t})[0];\n\t\t\t// console.log(prevScreen);\n\t\t\tif (prevScreen) prevScreen.out(delta);\n\t\t\tif (currentScreen) currentScreen.in(delta);\n\n\t\t}\n\n\n\t\t_nextState() {\n\t\t\tthis.index++;\n\t\t}\n\n\t\t_prevState() {\n\t\t\tthis.index--;\n\t\t}\n\n\n\t\t_bindEvents() {\n\n\t\t\t$(window).on('wheel', (e) => {\n\t\t\t\tlet delta = e.originalEvent.wheelDelta;\n\n\t\t\t\tif (delta > 0) {\n\t\t\t\t\tthis._prevState();\n\t\t\t\t\treturn;\n\t\t\t\t};\n\n\t\t\t\tif (delta < 0) {\n\t\t\t\t\tthis._nextState();\n\t\t\t\t\treturn;\n\t\t\t\t};\n\t\t\t});\n\n\t\t}\n\t}\n\n\n\t// test\n\tlet page = new Page($('section'));\n\tconsole.log(page);\n\n}(jQuery))"]}